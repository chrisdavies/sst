"use strict";function initializeStore(t,e,r,n){for(var i in r){var a=r[i];if("$"===i[0])t.selectors[i]=buildSelector(t,"",i,a);else if("function"==typeof a)t.actions[i]=buildAction(t,"",i,a,n);else{var o=buildNested(t,i,a,n);e.state[i]=a.initialState(e.state[i]),t.actions[i]=o.actions,t.selectors[i]=o.selectors}}}function buildNested(t,e,r,n){var i={},a={};for(var o in r)"$"===o[0]?a[o]=buildSelector(t,e,o,r[o]):i[o]=buildAction(t,e,o,r[o],n);return{actions:i,selectors:a}}function buildSelector(t,e,r,n){return function(){var r=nextArgs(t,e,arguments);return n.apply(null,r)}}function buildAction(t,e,r,n,i){return assertValidProp(r),function(){return i({store:t,stateProp:e,actionName:r,action:n,args:arguments})}}function assertValidProp(t){var e=/^\_/;if(e.test(t))throw"Invalid property "+t+". Properties cannot start with _"}function buildMiddleware(t){for(var e=leafMiddleware,r=t.length-1;r>=0;--r)e=makeMiddleware(t[r],e);return e}function makeMiddleware(t,e){return function(r){return t(r,e)}}function leafMiddleware(t){var e=t.stateProp,r=t.store,n=nextArgs(r,e,t.args),i=t.action.apply(null,n),a=!i||"function"!=typeof i.then;if("function"==typeof i&&(i=i(r)),!e&&a)r.setState(i);else if(a){var o=Object.assign({},r.getState());o[e]=i,r.setState(o)}return i}function nextArgs(t,e,r){var n=e?t.getState()[e]:t.getState();return Array.prototype.concat.apply([n],r)}module.exports=function(t,e,r){r=r||[];var n={state:Object.assign({},t)},i=buildMiddleware(r),a={actions:{},selectors:{},getState:function(){return n.state},setState:function(t){return n.state=t}};return initializeStore(a,n,e,i),a};
//# sourceMappingURL=sst.min.js.map